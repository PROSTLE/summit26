<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Venue Map</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
  firebase.initializeApp({
    apiKey: "AIzaSyCv2_J69ZSHvqtHZmyoDTzabSnysRuw12g",
    authDomain: "summit26-849b4.firebaseapp.com",
    projectId: "summit26-849b4",
    storageBucket: "summit26-849b4.firebasestorage.app",
    messagingSenderId: "170185003096",
    appId: "1:170185003096:web:27a6c5e3af61fbfd797a2d"
  });
  const db = firebase.firestore();
</script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><g transform="rotate(-45 24 24)"><path fill="%23f97316" d="M24 4 L28 14 L30 24 L28 34 L24 44 L20 34 L18 24 L20 14 Z"/><path fill="%23000" d="M24 8 L26.5 16 L27.5 24 L26.5 32 L24 40 L21.5 32 L20.5 24 L21.5 16 Z"/><ellipse cx="24" cy="42" rx="6" ry="3" fill="%23ea580c" opacity="0.7"/><circle cx="24" cy="10" r="3" fill="%23fbbf24"/><circle cx="24" cy="8" r="4" fill="%23fbbf24" opacity="0.3"/></g></svg>') 24 24, auto;
    }
    
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      overflow-x: hidden;
    }

    /* Custom cursor for clickable elements */
    a, button, .seat {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><g transform="rotate(-45 24 24)"><path fill="%23f97316" d="M24 4 L28 14 L30 24 L28 34 L24 44 L20 34 L18 24 L20 14 Z"/><path fill="%23000" d="M24 8 L26.5 16 L27.5 24 L26.5 32 L24 40 L21.5 32 L20.5 24 L21.5 16 Z"/><ellipse cx="24" cy="42" rx="6" ry="3" fill="%23ea580c" opacity="0.7"/><circle cx="24" cy="10" r="3" fill="%23fbbf24"/><circle cx="24" cy="8" r="5" fill="%23fbbf24" opacity="0.4"/><circle cx="24" cy="6" r="6" fill="%23fbbf24" opacity="0.2"/></g></svg>') 24 24, pointer !important;
    }

    /* Cursor trail effect */
    .cursor-trail {
      position: fixed;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #f97316;
      pointer-events: none;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.3s ease;
      box-shadow: 0 0 15px rgba(249, 115, 22, 0.4);
    }
  </style>
</head>
<body>

<section id="venue-map" style="
  min-height: 100vh;
  width: 100%;
  background: linear-gradient(to bottom, #0a0e1a, #0f172a);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overflow-x: hidden;
">

  <!-- Custom Scrollbar Styling -->
  <style>
    #venue-map::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }
    #venue-map::-webkit-scrollbar-track {
      background: #020617;
    }
    #venue-map::-webkit-scrollbar-thumb {
      background: #1e293b;
      border-radius: 6px;
    }
    #venue-map::-webkit-scrollbar-thumb:hover {
      background: #334155;
    }
    /* Firefox scrollbar */
    #venue-map {
      scrollbar-width: thin;
      scrollbar-color: #1e293b #020617;
    }
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #f97316;
      color: #000;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 700;
      font-size: 1rem;
      transition: all 0.3s;
      border: none;
    }
    .back-btn:hover {
      background: #fb923c;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(249, 115, 22, 0.3);
    }
    .proceed-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #10b981;
      color: #fff;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 700;
      font-size: 1rem;
      transition: all 0.3s;
      border: none;
    }
    .proceed-btn:hover:not(:disabled) {
      background: #059669;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
    }
    .proceed-btn:disabled {
      background: #6b7280;
      cursor: not-allowed;
      opacity: 0.6;
    }
  </style>

  <div style="padding:1.5rem 2rem;background:#1e293b;border-bottom:2px solid #334155;display:flex;align-items:center;justify-content:space-between;width:100%;">
    <a href="index.html" class="back-btn">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back
    </a>
    <div style="text-align:center;flex:1;">
      <h2 style="color:#f97316;font-size:2.5rem;font-weight:800;margin:0;">
        Venue Layout – Innovation Summit 2026
      </h2>
      <p style="color:#94a3b8;margin:0.5rem 0 0 0;">Select Your Seat | <span style="color:#4b5563;">⬛ Available</span> <span style="color:#ef4444;">⬛ Occupied</span> <span style="color:#10b981;">⬛ Selected</span></p>
    </div>
    <button class="proceed-btn" id="proceed-btn" disabled>
      Proceed
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </button>
  </div>

  <div style="flex:1;display:flex;justify-content:center;align-items:center;width:100%;padding:2rem 0;">
    <svg viewBox="0 0 1400 900"
         xmlns="http://www.w3.org/2000/svg"
         style="width:98%;max-width:1400px;height:auto;background:#020617;border-radius:24px;">

      <!-- OUTER BORDER -->
      <rect x="40" y="40" width="1320" height="820" rx="28"
            fill="none" stroke="#334155" stroke-width="4"/>

      <!-- ENTRY / EXIT -->
      <rect x="80" y="60" width="260" height="50" rx="12" fill="#1f2937"/>
      <text x="210" y="95" fill="#94a3b8" font-weight="800" text-anchor="middle">EXIT</text>

      <rect x="1060" y="60" width="260" height="50" rx="12" fill="#1f2937"/>
      <text x="1190" y="95" fill="#94a3b8" font-weight="800" text-anchor="middle">ENTRY</text>

      <!-- STAGE -->
      <rect x="460" y="130" width="480" height="110" rx="22" fill="#f97316"/>
      <text x="700" y="200" fill="#000" font-size="28" font-weight="900" text-anchor="middle">
        STAGE
      </text>

      <!-- TECH ROOM -->
      <rect x="80" y="300" width="260" height="360" rx="22" fill="#1f2937"/>
      <text x="210" y="490" fill="#94a3b8" font-weight="800" text-anchor="middle">TECHNICAL ROOM</text>

      <!-- LOUNGE -->
      <rect x="1060" y="300" width="260" height="360" rx="22"
            fill="#0e749030" stroke="#0e7490" stroke-width="3"/>
      <text x="1190" y="490" fill="#0e7490" font-weight="800" text-anchor="middle">LOUNGE</text>

      <!-- ===== TOP SEATING BOX (75 SEATS) ===== -->
      <rect x="360" y="300" width="680" height="240" rx="22"
            fill="#020617" stroke="#334155" stroke-width="3"/>
      <text x="700" y="290" fill="#94a3b8" font-weight="800" text-anchor="middle">
        SEATING — 75 SEATS
      </text>

      <!-- TOP SEATS: 5 rows × 15 seats = 75 (NO NUMBERS) -->
      <!-- Row 1 -->
      <rect x="407" y="320" width="26" height="26" rx="5" class="seat available" data-seat="1" fill="#4b5563"/>
      <rect x="447" y="320" width="26" height="26" rx="5" class="seat available" data-seat="2" fill="#4b5563"/>
      <rect x="487" y="320" width="26" height="26" rx="5" class="seat available" data-seat="3" fill="#4b5563"/>
      <rect x="527" y="320" width="26" height="26" rx="5" class="seat available" data-seat="4" fill="#4b5563"/>
      <rect x="567" y="320" width="26" height="26" rx="5" class="seat available" data-seat="5" fill="#4b5563"/>
      <rect x="607" y="320" width="26" height="26" rx="5" class="seat available" data-seat="6" fill="#4b5563"/>
      <rect x="647" y="320" width="26" height="26" rx="5" class="seat available" data-seat="7" fill="#4b5563"/>
      <rect x="687" y="320" width="26" height="26" rx="5" class="seat available" data-seat="8" fill="#4b5563"/>
      <rect x="727" y="320" width="26" height="26" rx="5" class="seat available" data-seat="9" fill="#4b5563"/>
      <rect x="767" y="320" width="26" height="26" rx="5" class="seat available" data-seat="10" fill="#4b5563"/>
      <rect x="807" y="320" width="26" height="26" rx="5" class="seat available" data-seat="11" fill="#4b5563"/>
      <rect x="847" y="320" width="26" height="26" rx="5" class="seat available" data-seat="12" fill="#4b5563"/>
      <rect x="887" y="320" width="26" height="26" rx="5" class="seat available" data-seat="13" fill="#4b5563"/>
      <rect x="927" y="320" width="26" height="26" rx="5" class="seat available" data-seat="14" fill="#4b5563"/>
      <rect x="967" y="320" width="26" height="26" rx="5" class="seat available" data-seat="15" fill="#4b5563"/>

      <!-- Row 2 -->
      <rect x="407" y="364" width="26" height="26" rx="5" class="seat available" data-seat="16" fill="#4b5563"/>
      <rect x="447" y="364" width="26" height="26" rx="5" class="seat available" data-seat="17" fill="#4b5563"/>
      <rect x="487" y="364" width="26" height="26" rx="5" class="seat available" data-seat="18" fill="#4b5563"/>
      <rect x="527" y="364" width="26" height="26" rx="5" class="seat available" data-seat="19" fill="#4b5563"/>
      <rect x="567" y="364" width="26" height="26" rx="5" class="seat available" data-seat="20" fill="#4b5563"/>
      <rect x="607" y="364" width="26" height="26" rx="5" class="seat available" data-seat="21" fill="#4b5563"/>
      <rect x="647" y="364" width="26" height="26" rx="5" class="seat available" data-seat="22" fill="#4b5563"/>
      <rect x="687" y="364" width="26" height="26" rx="5" class="seat available" data-seat="23" fill="#4b5563"/>
      <rect x="727" y="364" width="26" height="26" rx="5" class="seat available" data-seat="24" fill="#4b5563"/>
      <rect x="767" y="364" width="26" height="26" rx="5" class="seat available" data-seat="25" fill="#4b5563"/>
      <rect x="807" y="364" width="26" height="26" rx="5" class="seat available" data-seat="26" fill="#4b5563"/>
      <rect x="847" y="364" width="26" height="26" rx="5" class="seat available" data-seat="27" fill="#4b5563"/>
      <rect x="887" y="364" width="26" height="26" rx="5" class="seat available" data-seat="28" fill="#4b5563"/>
      <rect x="927" y="364" width="26" height="26" rx="5" class="seat available" data-seat="29" fill="#4b5563"/>
      <rect x="967" y="364" width="26" height="26" rx="5" class="seat available" data-seat="30" fill="#4b5563"/>

      <!-- Row 3 -->
      <rect x="407" y="408" width="26" height="26" rx="5" class="seat available" data-seat="31" fill="#4b5563"/>
      <rect x="447" y="408" width="26" height="26" rx="5" class="seat available" data-seat="32" fill="#4b5563"/>
      <rect x="487" y="408" width="26" height="26" rx="5" class="seat available" data-seat="33" fill="#4b5563"/>
      <rect x="527" y="408" width="26" height="26" rx="5" class="seat available" data-seat="34" fill="#4b5563"/>
      <rect x="567" y="408" width="26" height="26" rx="5" class="seat available" data-seat="35" fill="#4b5563"/>
      <rect x="607" y="408" width="26" height="26" rx="5" class="seat available" data-seat="36" fill="#4b5563"/>
      <rect x="647" y="408" width="26" height="26" rx="5" class="seat available" data-seat="37" fill="#4b5563"/>
      <rect x="687" y="408" width="26" height="26" rx="5" class="seat available" data-seat="38" fill="#4b5563"/>
      <rect x="727" y="408" width="26" height="26" rx="5" class="seat available" data-seat="39" fill="#4b5563"/>
      <rect x="767" y="408" width="26" height="26" rx="5" class="seat available" data-seat="40" fill="#4b5563"/>
      <rect x="807" y="408" width="26" height="26" rx="5" class="seat available" data-seat="41" fill="#4b5563"/>
      <rect x="847" y="408" width="26" height="26" rx="5" class="seat available" data-seat="42" fill="#4b5563"/>
      <rect x="887" y="408" width="26" height="26" rx="5" class="seat available" data-seat="43" fill="#4b5563"/>
      <rect x="927" y="408" width="26" height="26" rx="5" class="seat available" data-seat="44" fill="#4b5563"/>
      <rect x="967" y="408" width="26" height="26" rx="5" class="seat available" data-seat="45" fill="#4b5563"/>

      <!-- Row 4 -->
      <rect x="407" y="452" width="26" height="26" rx="5" class="seat available" data-seat="46" fill="#4b5563"/>
      <rect x="447" y="452" width="26" height="26" rx="5" class="seat available" data-seat="47" fill="#4b5563"/>
      <rect x="487" y="452" width="26" height="26" rx="5" class="seat available" data-seat="48" fill="#4b5563"/>
      <rect x="527" y="452" width="26" height="26" rx="5" class="seat available" data-seat="49" fill="#4b5563"/>
      <rect x="567" y="452" width="26" height="26" rx="5" class="seat available" data-seat="50" fill="#4b5563"/>
      <rect x="607" y="452" width="26" height="26" rx="5" class="seat available" data-seat="51" fill="#4b5563"/>
      <rect x="647" y="452" width="26" height="26" rx="5" class="seat available" data-seat="52" fill="#4b5563"/>
      <rect x="687" y="452" width="26" height="26" rx="5" class="seat available" data-seat="53" fill="#4b5563"/>
      <rect x="727" y="452" width="26" height="26" rx="5" class="seat available" data-seat="54" fill="#4b5563"/>
      <rect x="767" y="452" width="26" height="26" rx="5" class="seat available" data-seat="55" fill="#4b5563"/>
      <rect x="807" y="452" width="26" height="26" rx="5" class="seat available" data-seat="56" fill="#4b5563"/>
      <rect x="847" y="452" width="26" height="26" rx="5" class="seat available" data-seat="57" fill="#4b5563"/>
      <rect x="887" y="452" width="26" height="26" rx="5" class="seat available" data-seat="58" fill="#4b5563"/>
      <rect x="927" y="452" width="26" height="26" rx="5" class="seat available" data-seat="59" fill="#4b5563"/>
      <rect x="967" y="452" width="26" height="26" rx="5" class="seat available" data-seat="60" fill="#4b5563"/>

      <!-- Row 5 -->
      <rect x="407" y="496" width="26" height="26" rx="5" class="seat available" data-seat="61" fill="#4b5563"/>
      <rect x="447" y="496" width="26" height="26" rx="5" class="seat available" data-seat="62" fill="#4b5563"/>
      <rect x="487" y="496" width="26" height="26" rx="5" class="seat available" data-seat="63" fill="#4b5563"/>
      <rect x="527" y="496" width="26" height="26" rx="5" class="seat available" data-seat="64" fill="#4b5563"/>
      <rect x="567" y="496" width="26" height="26" rx="5" class="seat available" data-seat="65" fill="#4b5563"/>
      <rect x="607" y="496" width="26" height="26" rx="5" class="seat available" data-seat="66" fill="#4b5563"/>
      <rect x="647" y="496" width="26" height="26" rx="5" class="seat available" data-seat="67" fill="#4b5563"/>
      <rect x="687" y="496" width="26" height="26" rx="5" class="seat available" data-seat="68" fill="#4b5563"/>
      <rect x="727" y="496" width="26" height="26" rx="5" class="seat available" data-seat="69" fill="#4b5563"/>
      <rect x="767" y="496" width="26" height="26" rx="5" class="seat available" data-seat="70" fill="#4b5563"/>
      <rect x="807" y="496" width="26" height="26" rx="5" class="seat available" data-seat="71" fill="#4b5563"/>
      <rect x="847" y="496" width="26" height="26" rx="5" class="seat available" data-seat="72" fill="#4b5563"/>
      <rect x="887" y="496" width="26" height="26" rx="5" class="seat available" data-seat="73" fill="#4b5563"/>
      <rect x="927" y="496" width="26" height="26" rx="5" class="seat available" data-seat="74" fill="#4b5563"/>
      <rect x="967" y="496" width="26" height="26" rx="5" class="seat available" data-seat="75" fill="#4b5563"/>

      <!-- ===== BOTTOM SEATING BOX (65 SEATS) ===== -->
      <rect x="360" y="580" width="680" height="200" rx="22"
            fill="#020617" stroke="#334155" stroke-width="3"/>
      <text x="700" y="570" fill="#94a3b8" font-weight="800" text-anchor="middle">
        SEATING — 65 SEATS
      </text>

      <!-- BOTTOM SEATS: 5 rows × 13 seats = 65 (NO NUMBERS) -->
      <!-- Row 1 -->
      <rect x="404" y="600" width="28" height="28" rx="5" class="seat available" data-seat="76" fill="#4b5563"/>
      <rect x="451" y="600" width="28" height="28" rx="5" class="seat available" data-seat="77" fill="#4b5563"/>
      <rect x="498" y="600" width="28" height="28" rx="5" class="seat available" data-seat="78" fill="#4b5563"/>
      <rect x="545" y="600" width="28" height="28" rx="5" class="seat available" data-seat="79" fill="#4b5563"/>
      <rect x="592" y="600" width="28" height="28" rx="5" class="seat available" data-seat="80" fill="#4b5563"/>
      <rect x="639" y="600" width="28" height="28" rx="5" class="seat available" data-seat="81" fill="#4b5563"/>
      <rect x="686" y="600" width="28" height="28" rx="5" class="seat available" data-seat="82" fill="#4b5563"/>
      <rect x="733" y="600" width="28" height="28" rx="5" class="seat available" data-seat="83" fill="#4b5563"/>
      <rect x="780" y="600" width="28" height="28" rx="5" class="seat available" data-seat="84" fill="#4b5563"/>
      <rect x="827" y="600" width="28" height="28" rx="5" class="seat available" data-seat="85" fill="#4b5563"/>
      <rect x="874" y="600" width="28" height="28" rx="5" class="seat available" data-seat="86" fill="#4b5563"/>
      <rect x="921" y="600" width="28" height="28" rx="5" class="seat available" data-seat="87" fill="#4b5563"/>
      <rect x="968" y="600" width="28" height="28" rx="5" class="seat available" data-seat="88" fill="#4b5563"/>

      <!-- Row 2 -->
      <rect x="404" y="636" width="28" height="28" rx="5" class="seat available" data-seat="89" fill="#4b5563"/>
      <rect x="451" y="636" width="28" height="28" rx="5" class="seat available" data-seat="90" fill="#4b5563"/>
      <rect x="498" y="636" width="28" height="28" rx="5" class="seat available" data-seat="91" fill="#4b5563"/>
      <rect x="545" y="636" width="28" height="28" rx="5" class="seat available" data-seat="92" fill="#4b5563"/>
      <rect x="592" y="636" width="28" height="28" rx="5" class="seat available" data-seat="93" fill="#4b5563"/>
      <rect x="639" y="636" width="28" height="28" rx="5" class="seat available" data-seat="94" fill="#4b5563"/>
      <rect x="686" y="636" width="28" height="28" rx="5" class="seat available" data-seat="95" fill="#4b5563"/>
      <rect x="733" y="636" width="28" height="28" rx="5" class="seat available" data-seat="96" fill="#4b5563"/>
      <rect x="780" y="636" width="28" height="28" rx="5" class="seat available" data-seat="97" fill="#4b5563"/>
      <rect x="827" y="636" width="28" height="28" rx="5" class="seat available" data-seat="98" fill="#4b5563"/>
      <rect x="874" y="636" width="28" height="28" rx="5" class="seat available" data-seat="99" fill="#4b5563"/>
      <rect x="921" y="636" width="28" height="28" rx="5" class="seat available" data-seat="100" fill="#4b5563"/>
      <rect x="968" y="636" width="28" height="28" rx="5" class="seat available" data-seat="101" fill="#4b5563"/>

      <!-- Row 3 -->
      <rect x="404" y="672" width="28" height="28" rx="5" class="seat available" data-seat="102" fill="#4b5563"/>
      <rect x="451" y="672" width="28" height="28" rx="5" class="seat available" data-seat="103" fill="#4b5563"/>
      <rect x="498" y="672" width="28" height="28" rx="5" class="seat available" data-seat="104" fill="#4b5563"/>
      <rect x="545" y="672" width="28" height="28" rx="5" class="seat available" data-seat="105" fill="#4b5563"/>
      <rect x="592" y="672" width="28" height="28" rx="5" class="seat available" data-seat="106" fill="#4b5563"/>
      <rect x="639" y="672" width="28" height="28" rx="5" class="seat available" data-seat="107" fill="#4b5563"/>
      <rect x="686" y="672" width="28" height="28" rx="5" class="seat available" data-seat="108" fill="#4b5563"/>
      <rect x="733" y="672" width="28" height="28" rx="5" class="seat available" data-seat="109" fill="#4b5563"/>
      <rect x="780" y="672" width="28" height="28" rx="5" class="seat available" data-seat="110" fill="#4b5563"/>
      <rect x="827" y="672" width="28" height="28" rx="5" class="seat available" data-seat="111" fill="#4b5563"/>
      <rect x="874" y="672" width="28" height="28" rx="5" class="seat available" data-seat="112" fill="#4b5563"/>
      <rect x="921" y="672" width="28" height="28" rx="5" class="seat available" data-seat="113" fill="#4b5563"/>
      <rect x="968" y="672" width="28" height="28" rx="5" class="seat available" data-seat="114" fill="#4b5563"/>

      <!-- Row 4 -->
      <rect x="404" y="708" width="28" height="28" rx="5" class="seat available" data-seat="115" fill="#4b5563"/>
      <rect x="451" y="708" width="28" height="28" rx="5" class="seat available" data-seat="116" fill="#4b5563"/>
      <rect x="498" y="708" width="28" height="28" rx="5" class="seat available" data-seat="117" fill="#4b5563"/>
      <rect x="545" y="708" width="28" height="28" rx="5" class="seat available" data-seat="118" fill="#4b5563"/>
      <rect x="592" y="708" width="28" height="28" rx="5" class="seat available" data-seat="119" fill="#4b5563"/>
      <rect x="639" y="708" width="28" height="28" rx="5" class="seat available" data-seat="120" fill="#4b5563"/>
      <rect x="686" y="708" width="28" height="28" rx="5" class="seat available" data-seat="121" fill="#4b5563"/>
      <rect x="733" y="708" width="28" height="28" rx="5" class="seat available" data-seat="122" fill="#4b5563"/>
      <rect x="780" y="708" width="28" height="28" rx="5" class="seat available" data-seat="123" fill="#4b5563"/>
      <rect x="827" y="708" width="28" height="28" rx="5" class="seat available" data-seat="124" fill="#4b5563"/>
      <rect x="874" y="708" width="28" height="28" rx="5" class="seat available" data-seat="125" fill="#4b5563"/>
      <rect x="921" y="708" width="28" height="28" rx="5" class="seat available" data-seat="126" fill="#4b5563"/>
      <rect x="968" y="708" width="28" height="28" rx="5" class="seat available" data-seat="127" fill="#4b5563"/>

      <!-- Row 5 -->
      <rect x="404" y="744" width="28" height="28" rx="5" class="seat available" data-seat="128" fill="#4b5563"/>
      <rect x="451" y="744" width="28" height="28" rx="5" class="seat available" data-seat="129" fill="#4b5563"/>
      <rect x="498" y="744" width="28" height="28" rx="5" class="seat available" data-seat="130" fill="#4b5563"/>
      <rect x="545" y="744" width="28" height="28" rx="5" class="seat available" data-seat="131" fill="#4b5563"/>
      <rect x="592" y="744" width="28" height="28" rx="5" class="seat available" data-seat="132" fill="#4b5563"/>
      <rect x="639" y="744" width="28" height="28" rx="5" class="seat available" data-seat="133" fill="#4b5563"/>
      <rect x="686" y="744" width="28" height="28" rx="5" class="seat available" data-seat="134" fill="#4b5563"/>
      <rect x="733" y="744" width="28" height="28" rx="5" class="seat available" data-seat="135" fill="#4b5563"/>
      <rect x="780" y="744" width="28" height="28" rx="5" class="seat available" data-seat="136" fill="#4b5563"/>
      <rect x="827" y="744" width="28" height="28" rx="5" class="seat available" data-seat="137" fill="#4b5563"/>
      <rect x="874" y="744" width="28" height="28" rx="5" class="seat available" data-seat="138" fill="#4b5563"/>
      <rect x="921" y="744" width="28" height="28" rx="5" class="seat available" data-seat="139" fill="#4b5563"/>
      <rect x="968" y="744" width="28" height="28" rx="5" class="seat available" data-seat="140" fill="#4b5563"/>

      <!-- STYLES -->
      <style>
        .seat { transition: all 0.2s; }
        .seat.available { opacity:0.8; }
        .seat.available:hover { opacity:1; stroke:#ffffff; stroke-width:2; }
        .seat.occupied { 
          fill:#ef4444 !important; 
          opacity:1; 
          cursor: not-allowed !important;
        }
        .seat.selected { 
          fill:#10b981 !important; 
          opacity:1;
          box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
      </style>

      <!-- CLICK HANDLER -->
      <script>
        // Pre-occupy some random seats (about 30% of seats)
  const preOccupiedSeats = [3, 7, 12, 18, 23, 29, 34, 41, 45, 52, 58, 63, 69, 74, 
                            77, 83, 88, 94, 99, 105, 110, 117, 122, 128, 133, 139];
  
  // Mark pre-occupied seats
  preOccupiedSeats.forEach(seatNum => {
    const seat = document.querySelector(`.seat[data-seat="${seatNum}"]`);
    if (seat) {
      seat.classList.remove('available');
      seat.classList.add('occupied');
    }
  });
  
  let selectedSeat = null;
  
  // Seat click handler
  document.querySelectorAll('.seat.available').forEach(seat => {
    seat.addEventListener('click', function() {
      // If clicking an occupied seat, do nothing
      if (this.classList.contains('occupied')) {
        return;
      }
      
      // Deselect previous seat if any
      if (selectedSeat && selectedSeat !== this) {
        selectedSeat.classList.remove('selected');
        selectedSeat.classList.add('available');
      }
      
      // Toggle current seat
      if (this.classList.contains('selected')) {
        this.classList.remove('selected');
        this.classList.add('available');
        selectedSeat = null;
        document.getElementById('proceed-btn').disabled = true;
      } else {
        this.classList.remove('available');
        this.classList.add('selected');
        selectedSeat = this;
        document.getElementById('proceed-btn').disabled = false;
      }
    });
  });
  
  // Proceed button handler – saves seat to Firestore and redirects to index4 with docId
  document.getElementById('proceed-btn').addEventListener('click', function() {
    if (!selectedSeat) {
      alert("Please select a seat first!");
      return;
    }

    const seatNumber = selectedSeat.getAttribute('data-seat');
    const docId = sessionStorage.getItem('currentRegDocId');

    if (!docId) {
      alert("No active registration found. Please start registration again.");
      window.location.href = "index.html";
      return;
    }

    // Save selected seat to Firestore
    db.collection("registrations").doc(docId).update({
      seatNumber: seatNumber,
      seatSelectedAt: firebase.firestore.Timestamp.now(),
      updatedAt: firebase.firestore.Timestamp.now()
    })
    .then(() => {
      console.log("Seat successfully saved in Firestore:", seatNumber);
      
      // Optional: clean up sessionStorage (uncomment if you want to remove it)
      // sessionStorage.removeItem('currentRegDocId');
      
      // Redirect to payment page with seat AND docId
      window.location.href = `index4.html?seat=${encodeURIComponent(seatNumber)}&docId=${docId}`;
    })
    .catch(err => {
      console.error("Error saving seat to Firestore:", err);
      alert("Couldn't save your seat choice.\n\nError: " + err.message + "\nPlease try again or check your connection.");
    });
  });

  // Optional: Debug log when page loads
  console.log("Audit page loaded – waiting for seat selection...");
      </script>

    </svg>
  </div>
</section>

<script>
// ── CURSOR TRAIL EFFECT ────────────────────────────
const trails = [];
const trailCount = 5;

// Create trail elements
for (let i = 0; i < trailCount; i++) {
  const trail = document.createElement('div');
  trail.className = 'cursor-trail';
  document.body.appendChild(trail);
  trails.push({
    element: trail,
    x: 0,
    y: 0,
    opacity: 1 - (i / trailCount)
  });
}

let mouseX = 0;
let mouseY = 0;

document.addEventListener('mousemove', (e) => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

function animateTrails() {
  trails.forEach((trail, index) => {
    if (index === 0) {
      trail.x = mouseX;
      trail.y = mouseY;
    } else {
      const prevTrail = trails[index - 1];
      trail.x += (prevTrail.x - trail.x) * 0.3;
      trail.y += (prevTrail.y - trail.y) * 0.3;
    }

    trail.element.style.left = trail.x + 'px';
    trail.element.style.top = trail.y + 'px';
    trail.element.style.opacity = trail.opacity;
  });

  requestAnimationFrame(animateTrails);
}

animateTrails();

// Show trails on mouse move
let trailTimeout;
document.addEventListener('mousemove', () => {
  trails.forEach(trail => trail.element.style.opacity = trail.opacity);
  clearTimeout(trailTimeout);
  trailTimeout = setTimeout(() => {
    trails.forEach(trail => trail.element.style.opacity = 0);
  }, 1000);
});
</script>

</body>
</html>